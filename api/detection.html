
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Detection &#8212; JanICE 7.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Enrollment" href="enrollment.html" />
    <link rel="prev" title="Training" href="train.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="detection">
<span id="id1"></span><h1>Detection<a class="headerlink" href="#detection" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>In the context of this API, detection is used to refer to the identification of
objects of interest within a <a class="reference internal" href="io.html#io"><span class="std std-ref">I/O</span></a> object. Detections are represented using
the <a class="reference internal" href="#janicedetectiontype"><span class="std std-ref">JaniceDetectionType</span></a> object which implementors are free to define
however they would like. For images, a detection is defined as a rectangle that
bounds an object of interest and an associated confidence value. For video, a
single object can exist in multiple frames. A rectangle and confidence are only
relevant in a single frame. In this case, we define a detection as a list of
(rectangle, confidence) pairs that track a single object through a video. It is
not required that this list be dense however (i.e. frames can be skipped). To
support this, we extend our representation of a detection to a (rectangle,
confidence, frame) tuple where frame gives the index of the frame the rectangle
was found in.</p>
</div>
<div class="section" id="structs">
<h2>Structs<a class="headerlink" href="#structs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="janicerect">
<span id="id2"></span><h3>JaniceRect<a class="headerlink" href="#janicerect" title="Permalink to this headline">¶</a></h3>
<p>A simple struct that represents a rectangle</p>
<div class="section" id="fields">
<h4>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="11%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>x</td>
<td>int</td>
<td>The x offset of the rectangle in pixels</td>
</tr>
<tr class="row-odd"><td>y</td>
<td>int</td>
<td>The y offset of the rectangle in pixels</td>
</tr>
<tr class="row-even"><td>width</td>
<td>int</td>
<td>The width of the rectangle in pixels</td>
</tr>
<tr class="row-odd"><td>height</td>
<td>int</td>
<td>The height of the rectangle in pixels</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janicetrack">
<span id="id3"></span><h3>JaniceTrack<a class="headerlink" href="#janicetrack" title="Permalink to this headline">¶</a></h3>
<p>A structure to represent a track through a <a class="reference internal" href="io.html#janicemediaiterator"><span class="std std-ref">JaniceMediaIterator</span></a> object.
Tracks may be sparse (i.e. frames do not need to be sequential). Tracks are
meant to follow a single object or area of interest, for example a face through
multiple frames of a video.</p>
<div class="section" id="confidence">
<span id="detection-confidence"></span><h4>Confidence<a class="headerlink" href="#confidence" title="Permalink to this headline">¶</a></h4>
<p>The confidence value indicates a likelihood that the rectangle actually
bounds an object of interest. It is <strong>NOT</strong> required to be a probability
and often only has meaning relative to other confidence values from the
same algorithm. The only restriction is that a larger confidence value
indicates a greater likelihood that the rectangle bounds an object.</p>
</div>
<div class="section" id="id4">
<h4>Fields<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="9%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>rects</td>
<td><a class="reference internal" href="#janicerect"><span class="std std-ref">JaniceRect</span></a>*</td>
<td>A list of rectangles surrounding areas of interest in the media. This list should be <code class="code docutils literal notranslate"><span class="pre">length</span></code> elements.</td>
</tr>
<tr class="row-odd"><td>confidences</td>
<td>float*</td>
<td>A confidence to associate with each rectangle in <code class="code docutils literal notranslate"><span class="pre">rects</span></code>. See <a class="reference internal" href="#detection-confidence"><span class="std std-ref">Confidence</span></a> for details about confidence values in this API. This list should be <code class="code docutils literal notranslate"><span class="pre">length</span></code> elements.</td>
</tr>
<tr class="row-even"><td>frames</td>
<td>uint32_t*</td>
<td>The frame indices associated with each rectangle in <code class="code docutils literal notranslate"><span class="pre">rects</span></code>. A track may be sparse and the indicies in this list are required to be sequential. This list should be <code class="code docutils literal notranslate"><span class="pre">length</span></code> elements.</td>
</tr>
<tr class="row-odd"><td>length</td>
<td>size_t</td>
<td>The number of rectangles, confidences, and frames in this structure.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janicedetectiontype">
<span id="id5"></span><h3>JaniceDetectionType<a class="headerlink" href="#janicedetectiontype" title="Permalink to this headline">¶</a></h3>
<p>A struct that represents a detection. See <a class="reference internal" href="#detection"><span class="std std-ref">Detection</span></a>
for more information.</p>
</div>
<div class="section" id="janicedetection">
<span id="id6"></span><h3>JaniceDetection<a class="headerlink" href="#janicedetection" title="Permalink to this headline">¶</a></h3>
<p>A pointer to a <a class="reference internal" href="#janicedetectiontype"><span class="std std-ref">JaniceDetectionType</span></a> object.</p>
<div class="section" id="signature">
<h4>Signature<a class="headerlink" href="#signature" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="n">JaniceDetectionType</span><span class="o">*</span> <span class="n">JaniceDetection</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janicedetections">
<span id="id7"></span><h3>JaniceDetections<a class="headerlink" href="#janicedetections" title="Permalink to this headline">¶</a></h3>
<p>A structure to represent a list of <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> objects.</p>
<div class="section" id="id8">
<h4>Fields<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="31%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detections</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a>*</td>
<td>An array of detection objects.</td>
</tr>
<tr class="row-odd"><td>length</td>
<td>size_t</td>
<td>The number of elements in <code class="code docutils literal notranslate"><span class="pre">detections</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janicedetectionsgroup">
<span id="id9"></span><h3>JaniceDetectionsGroup<a class="headerlink" href="#janicedetectionsgroup" title="Permalink to this headline">¶</a></h3>
<p>A structure to represent a list of <a class="reference internal" href="#janicedetections"><span class="std std-ref">JaniceDetections</span></a> objects.</p>
<div class="section" id="id10">
<h4>Fields<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="34%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>group</td>
<td><a class="reference internal" href="#janicedetections"><span class="std std-ref">JaniceDetections</span></a></td>
<td>An array of detections objects.</td>
</tr>
<tr class="row-odd"><td>length</td>
<td>size_t</td>
<td>The number of elements in <code class="code docutils literal notranslate"><span class="pre">group</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="callbacks">
<h2>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this headline">¶</a></h2>
<div class="section" id="janicedetectioncallback">
<span id="id11"></span><h3>JaniceDetectionCallback<a class="headerlink" href="#janicedetectioncallback" title="Permalink to this headline">¶</a></h3>
<p>A function prototype to process <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> objects as they are
found.</p>
<div class="section" id="id12">
<h4>Signature<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JaniceError</span> <span class="p">(</span><span class="o">*</span><span class="n">JaniceDetectionCallback</span><span class="p">)(</span><span class="n">const</span> <span class="n">JaniceDetection</span><span class="o">*</span><span class="p">,</span> <span class="n">size_t</span><span class="p">,</span> <span class="n">void</span><span class="o">*</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="thread-safety">
<h4>Thread Safety<a class="headerlink" href="#thread-safety" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#thread-unsafe"><span class="std std-ref">Thread Unsafe</span></a>.</p>
</div>
<div class="section" id="parameters">
<h4>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="16%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td>const <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a>*</td>
<td>A detection object produced during the callback</td>
</tr>
<tr class="row-odd"><td>index</td>
<td>size_t</td>
<td>The index of the media iterator in which the detection occured.</td>
</tr>
<tr class="row-even"><td>user_data</td>
<td>void*</td>
<td>User defined data that may assist in the processing of the detection. It is passed directly from the <code class="code docutils literal notranslate"><span class="pre">\*_with_callback</span></code> function to the callback.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="janice-create-detection-from-rect">
<span id="id13"></span><h3>janice_create_detection_from_rect<a class="headerlink" href="#janice-create-detection-from-rect" title="Permalink to this headline">¶</a></h3>
<p>Create a detection from a known rectangle. This is useful if a human has
identified an object of interest and would like to run subsequent API
functions on it. In the case where the input media is a video the given
rectangle is considered an initial sighting of an object or region of interest.
The implementation may detect additional sightings of the object in successive
frames.</p>
<div class="section" id="id14">
<h4>Signature<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_create_detection_from_rect</span><span class="p">(</span><span class="n">JaniceMediaIterator</span><span class="o">*</span> <span class="n">media</span><span class="p">,</span>
                                                            <span class="n">const</span> <span class="n">JaniceRect</span><span class="o">*</span> <span class="n">rect</span><span class="p">,</span>
                                                            <span class="n">const</span> <span class="n">uint32_t</span> <span class="n">frame</span><span class="p">,</span>
                                                            <span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">detection</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id15">
<h4>Thread Safety<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id16">
<h4>Parameters<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="12%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>media</td>
<td><a class="reference internal" href="io.html#janicemediaiterator"><span class="std std-ref">JaniceMediaIterator</span></a>*</td>
<td>A media object to create the detection from. After the function call, the iterator will exist in an undefined state. A user should call <a class="reference internal" href="io.html#reset"><span class="std std-ref">reset</span></a> on the iterator before reusing it.</td>
</tr>
<tr class="row-odd"><td>rect</td>
<td>const <a class="reference internal" href="#janicerect"><span class="std std-ref">JaniceRect</span></a>*</td>
<td>A rectangle that bounds the object of interest.</td>
</tr>
<tr class="row-even"><td>frame</td>
<td>const uint32_t</td>
<td>An index to the frame in the media where the object of interest appears. If the media is an image this should be 0.</td>
</tr>
<tr class="row-odd"><td>detection</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a>*</td>
<td>An uninitialized pointer to a detection object. The object should allocated by the implementor during function execution. The user is responsible for freeing the object using <a class="reference internal" href="#janice-free-detection"><span class="std std-ref">janice_free_detection</span></a>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JaniceMedia media; // Where media is a valid media object created previously

JaniceRect rect; // Create a bounding rectangle around an object of interest
rect.x      = 10; // The rectangle should fall within the bounds of the media
rect.y      = 10; // This code assumes media width &gt; 110 and media height &gt; 110
rect.width  = 100;
rect.height = 100;

JaniceDetection detection = NULL; // best practice to initialize to NULL
if (janice_create_detection(media, rect, 0 /* frame */, &amp;detection) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-create-detection-from-track">
<span id="id17"></span><h3>janice_create_detection_from_track<a class="headerlink" href="#janice-create-detection-from-track" title="Permalink to this headline">¶</a></h3>
<p>Create a detection from a known track. This is useful if a human has
identified an object of interest and would like to run subsequent API
functions on it.</p>
<div class="section" id="id18">
<h4>Signature<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_create_detection_from_track</span><span class="p">(</span><span class="n">JaniceMediaIterator</span><span class="o">*</span> <span class="n">media</span><span class="p">,</span>
                                                             <span class="n">const</span> <span class="n">JaniceTrack</span><span class="o">*</span> <span class="n">track</span><span class="p">,</span>
                                                             <span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">detection</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id19">
<h4>Thread Safety<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id20">
<h4>Parameters<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="12%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>media</td>
<td><a class="reference internal" href="io.html#janicemediaiterator"><span class="std std-ref">JaniceMediaIterator</span></a>*</td>
<td>A media object to create the detection from. After the function call, the iterator will exist in an undefined state. A user should call <a class="reference internal" href="io.html#reset"><span class="std std-ref">reset</span></a> on the iterator before reusing it.</td>
</tr>
<tr class="row-odd"><td>track</td>
<td>const <a class="reference internal" href="#janicetrack"><span class="std std-ref">JaniceTrack</span></a>*</td>
<td>A track bounding a region of through 1 or more frames.</td>
</tr>
<tr class="row-even"><td>detection</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a>*</td>
<td>An uninitialized pointer to a detection object. The object should be allocated by the implementor during function execution. The user is responsible for freeing the object by calling <a class="reference internal" href="#janice-free-detection"><span class="std std-ref">janice_free_detection</span></a>.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-detect">
<span id="id21"></span><h3>janice_detect<a class="headerlink" href="#janice-detect" title="Permalink to this headline">¶</a></h3>
<p>Automatically detect objects in a media object. See <a class="reference internal" href="#detection"><span class="std std-ref">Detection</span></a> for an
overview of detection in the context of this API.</p>
<div class="section" id="id22">
<h4>Signature<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_detect</span><span class="p">(</span><span class="n">JaniceMediaIterator</span><span class="o">*</span> <span class="n">media</span><span class="p">,</span>
                                        <span class="n">const</span> <span class="n">JaniceContext</span><span class="o">*</span> <span class="n">context</span><span class="p">,</span>
                                        <span class="n">JaniceDetections</span><span class="o">*</span> <span class="n">detections</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id23">
<h4>Thread Safety<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="tracking">
<span id="detection-tracking"></span><h4>Tracking<a class="headerlink" href="#tracking" title="Permalink to this headline">¶</a></h4>
<p>When the input media is a video, implementations may implement a
form of object tracking to correlate multiple sightings of the same
object into a single structure. There are a number of approaches and
algorithms to implement object tracking. This API makes NO attempt to
define or otherwise constrain how implementations handle tracking. Users
should be warned that an implementation might output multiple tracks for
a single object and that a single track might contain multiple objects
in it by mistake. In some cases, which should be clearly documented in
implementation documentation, it might be beneficial to perform a
post-processing clustering step on the results tracks, which could help
correlate multiple tracks of the same object.</p>
</div>
<div class="section" id="id24">
<h4>Parameters<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="9%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>media</td>
<td><a class="reference internal" href="io.html#janicemediaiterator"><span class="std std-ref">JaniceMediaIterator</span></a>*</td>
<td>A media object to run detection on. After the function call, the iterator will exist in an undefined state. A user should call <a class="reference internal" href="io.html#reset"><span class="std std-ref">reset</span></a> on the iterator before reusing it.</td>
</tr>
<tr class="row-odd"><td>context</td>
<td>const <a class="reference internal" href="context.html#janicecontext"><span class="std std-ref">JaniceContext</span></a>*</td>
<td>A context object with relevant hyperparameters set. Memory for the object should be managed by the user. The implementation should assume this points to a valid object.</td>
</tr>
<tr class="row-even"><td>detections</td>
<td><a class="reference internal" href="#janicedetections"><span class="std std-ref">JaniceDetections</span></a>*</td>
<td>A struct to hold the resulting detections. The user is responsible for allocating memory for the struct before the function call. The implementor is responsbile for allocating and filling internal members. The user is required to clear the struct by calling <a class="reference internal" href="#janice-clear-detections"><span class="std std-ref">janice_clear_detections</span></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id25">
<h4>Example<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JaniceContext context = nullptr;
if (janice_create_context(JaniceDetectAll, // detection policy
                          24, // min_object_size, only find objects where the smaller side &gt; 24 pixels
                          Janice1NProbe, // enrollment type, this shouldn&#39;t impact detection
                          0, // threshold, this shouldn&#39;t impact detection
                          0, // max_returns, this shouldn&#39;t impact detection
                          0, // hint, this shouldn&#39;t impact detection
                          &amp;context) != JANICE_SUCCESS)
    // ERROR!

JaniceMedia media; // Where media is a valid media object created previously
JaniceDetections detections;
if (janice_detect(media, context, &amp;detections) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-detect-with-callback">
<span id="id26"></span><h3>janice_detect_with_callback<a class="headerlink" href="#janice-detect-with-callback" title="Permalink to this headline">¶</a></h3>
<p>Run detection with a callback, which surfaces detections as they are made for
processing. The callback accepts user data as input. It is important to remember
that <code class="code docutils literal notranslate"><span class="pre">JaniceMediaIterator</span></code> may be stateful and should not be part of the
callback. The implementor is not responsible for ensuring that the state of
<code class="code docutils literal notranslate"><span class="pre">media</span></code> is not changed by the user during this call. The provided callback
may return an error. If an error is returned by the callback, the implementation
should abort and return that error as well. This function will always pass
<code class="code docutils literal notranslate"><span class="pre">0</span></code> to the index parameter of the callback.</p>
<div class="section" id="id27">
<h4>Signature<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_detect_with_callback</span><span class="p">(</span><span class="n">JaniceMediaIterator</span><span class="o">*</span> <span class="n">media</span><span class="p">,</span>
                                                      <span class="n">const</span> <span class="n">JaniceContext</span><span class="o">*</span> <span class="n">context</span><span class="p">,</span>
                                                      <span class="n">JaniceDetectionCallback</span> <span class="n">callback</span><span class="p">,</span>
                                                      <span class="n">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id28">
<h4>Thread Safety<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id29">
<h4>Parameters<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="15%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>media</td>
<td><a class="reference internal" href="io.html#janicemediaiterator"><span class="std std-ref">JaniceMediaIterator</span></a>*</td>
<td>A media object to run detection on. After the function call, the iterator will exist in an undefined state. A user should call <a class="reference internal" href="io.html#reset"><span class="std std-ref">reset</span></a> on the iterator before reusing it.</td>
</tr>
<tr class="row-odd"><td>context</td>
<td>const <a class="reference internal" href="context.html#janicecontext"><span class="std std-ref">JaniceContext</span></a>*</td>
<td>A context object with relevant hyperparameters set. Memory for the object should be managed by the user. The implementation should assume this points to a valid object.</td>
</tr>
<tr class="row-even"><td>callback</td>
<td><a class="reference internal" href="#janicedetectioncallback"><span class="std std-ref">JaniceDetectionCallback</span></a></td>
<td>A pointer to a user defined callback function.</td>
</tr>
<tr class="row-odd"><td>user_data</td>
<td>void*</td>
<td>A pointer to user defined data. This is passed to the callback function on each invocation.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-detect-batch">
<span id="id30"></span><h3>janice_detect_batch<a class="headerlink" href="#janice-detect-batch" title="Permalink to this headline">¶</a></h3>
<p>Detect faces in a batch of media objects. Batch processing can often be more
efficient than serial processing, particularly if a GPU or co-processor is being
utilized. This function reports per-image error codes. Depending on the batch
policy given, it will return one of <code class="code docutils literal notranslate"><span class="pre">JANICE_SUCCESS</span></code> if no errors occured,
or <code class="code docutils literal notranslate"><span class="pre">JANICE_BATCH_ABORTED_EARLY</span></code> or
<code class="code docutils literal notranslate"><span class="pre">JANICE_BATCH_FINISHED_WITH_ERRORS</span></code> if errors occured within the batch. In
either case, any computation marked <code class="code docutils literal notranslate"><span class="pre">JANICE_SUCCESS</span></code> in the output should
be considered valid output.</p>
<div class="section" id="id31">
<h4>Signature<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_detect_batch</span><span class="p">(</span><span class="n">const</span> <span class="n">JaniceMediaIterators</span><span class="o">*</span> <span class="n">media</span><span class="p">,</span>
                                              <span class="n">const</span> <span class="n">JaniceContext</span><span class="o">*</span> <span class="n">context</span><span class="p">,</span>
                                              <span class="n">JaniceDetectionsGroup</span><span class="o">*</span> <span class="n">detections</span><span class="p">,</span>
                                              <span class="n">JaniceErrors</span><span class="o">*</span> <span class="n">errors</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id32">
<h4>Thread Safety<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id33">
<h4>Parameters<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="2%" />
<col width="5%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>media</td>
<td>const <a class="reference internal" href="io.html#janicemediaiterators"><span class="std std-ref">JaniceMediaIterators</span></a>*</td>
<td>An array of media iterators to run detection on. After the function call, each iterator in the array will exist in an undefined state. A user should call <a class="reference internal" href="io.html#reset"><span class="std std-ref">reset</span></a> on each iterator before reusing them.</td>
</tr>
<tr class="row-odd"><td>context</td>
<td>const <a class="reference internal" href="context.html#janicecontext"><span class="std std-ref">JaniceContext</span></a>*</td>
<td>A context object with relevant hyperparameters set. Memory for the object should be managed by the user. The implementation should assume this points to a valid object.</td>
</tr>
<tr class="row-even"><td>detections</td>
<td><a class="reference internal" href="#janicedetectionsgroup"><span class="std std-ref">JaniceDetectionsGroup</span></a>*</td>
<td>A list of lists of detection objects. Each input media iterator can contain 0 or more possible detections. This output structure should mirror the input such that the sublist at index <code class="code docutils literal notranslate"><span class="pre">i</span></code> should contain all of the detections found in media iterator <code class="code docutils literal notranslate"><span class="pre">i</span></code>. If no detections are found in a particular media object an entry must still be present in the top-level output list and the sublist should have a length of 0. The user is responsible for allocating memory for the struct before the function call. The implementor is responsbile for allocating and filling internal members. The user is responsible for clearing the object by calling <a class="reference internal" href="#janice-clear-detections-group"><span class="std std-ref">janice_clear_detections_group</span></a></td>
</tr>
<tr class="row-odd"><td>errors</td>
<td><a class="reference internal" href="errors.html#janiceerrors"><span class="std std-ref">JaniceErrors</span></a>*</td>
<td>A struct to hold per-image error codes. There must be the same number of errors as there are <code class="code docutils literal notranslate"><span class="pre">media</span></code> unless the call aborted early, in which case there can be less. The <code class="code docutils literal notranslate"><span class="pre">ith</span></code> error code should give the status of detection on the <code class="code docutils literal notranslate"><span class="pre">ith</span></code> piece of media. The user is responsible for allocating memory for the struct before the function call. The implementor is responsbile for allocating and filling internal members. The user is responsible for clearing the object by calling <a class="reference internal" href="errors.html#janice-clear-errors"><span class="std std-ref">janice_clear_errors</span></a>.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-detect-batch-with-callback">
<span id="id34"></span><h3>janice_detect_batch_with_callback<a class="headerlink" href="#janice-detect-batch-with-callback" title="Permalink to this headline">¶</a></h3>
<p>Detect faces in a batch of media objects and surface detections as they are made
for processing. Batch processing can often be more efficient than serial
processing, particularly if a GPU or co-processor is being utilized. The
callback accepts user data as input. It is important to remember that
<code class="code docutils literal notranslate"><span class="pre">JaniceMediaIterator</span></code> may be stateful and should not be part of the
callback. The implementor is not responsible for ensuring that the state of
<code class="code docutils literal notranslate"><span class="pre">media</span></code> is not changed by the user during this call. The provided callback
may return an error. If an error is returned by the callback, it should be
stored at the corresponding offset in <code class="code docutils literal notranslate"><span class="pre">errors</span></code> and the implementation
should stop processing that media. As a special case, the callback may return
<code class="code docutils literal notranslate"><span class="pre">JANICE_CALLBACK_EXIT_IMMEDIATELY</span></code>. In this case, the parent function
should set the corresponding error appropriately and then return without
finishing.</p>
<div class="section" id="id35">
<h4>Signature<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_detect_batch_with_callback</span><span class="p">(</span><span class="n">const</span> <span class="n">JaniceMediaIterators</span><span class="o">*</span> <span class="n">media</span><span class="p">,</span>
                                                            <span class="n">const</span> <span class="n">JaniceContext</span><span class="o">*</span> <span class="n">context</span><span class="p">,</span>
                                                            <span class="n">JaniceDetectionCallback</span> <span class="n">callback</span><span class="p">,</span>
                                                            <span class="n">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">,</span>
                                                            <span class="n">JaniceErrors</span><span class="o">*</span> <span class="n">errors</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id36">
<h4>Thread Safety<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id37">
<h4>Parameters<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="2%" />
<col width="7%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>media</td>
<td>const <a class="reference internal" href="io.html#janicemediaiterators"><span class="std std-ref">JaniceMediaIterators</span></a>*</td>
<td>An array of media iterators to run detection on. After the function call, each iterator in the array will exist in an undefined state. A user should call <a class="reference internal" href="io.html#reset"><span class="std std-ref">reset</span></a> on each iterator before reusing them.</td>
</tr>
<tr class="row-odd"><td>context</td>
<td>const <a class="reference internal" href="context.html#janicecontext"><span class="std std-ref">JaniceContext</span></a>*</td>
<td>A context object with relevant hyperparameters set. Memory for the object should be managed by the user. The implementation should assume this points to a valid object.</td>
</tr>
<tr class="row-even"><td>callback</td>
<td><a class="reference internal" href="#janicedetectioncallback"><span class="std std-ref">JaniceDetectionCallback</span></a></td>
<td>A pointer to a user defined callback function.</td>
</tr>
<tr class="row-odd"><td>user_data</td>
<td>void*</td>
<td>A pointer to user defined data. This is passed to the callback function on each invocation.</td>
</tr>
<tr class="row-even"><td>errors</td>
<td><a class="reference internal" href="errors.html#janiceerrors"><span class="std std-ref">JaniceErrors</span></a>*</td>
<td>A struct to hold per-image error codes. There must be the same number of errors as there are <code class="code docutils literal notranslate"><span class="pre">media</span></code> unless the call aborted early, in which case there can be less. The <code class="code docutils literal notranslate"><span class="pre">ith</span></code> error code should give the status of detection on the <code class="code docutils literal notranslate"><span class="pre">ith</span></code> piece of media. The user is responsible for allocating memory for the struct before the function call. The implementor is responsbile for allocating and filling internal members. The user is responsible for clearing the object by calling <a class="reference internal" href="errors.html#janice-clear-errors"><span class="std std-ref">janice_clear_errors</span></a>.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-detection-get-track">
<span id="id38"></span><h3>janice_detection_get_track<a class="headerlink" href="#janice-detection-get-track" title="Permalink to this headline">¶</a></h3>
<p>Get a track object from a detection. The returned track should contain all
rectangles, confidences, and frame indicies stored in the detection.</p>
<div class="section" id="id39">
<h4>Signature<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_detection_get_track</span><span class="p">(</span><span class="n">const</span> <span class="n">JaniceDetection</span> <span class="n">detection</span><span class="p">,</span>
                                                     <span class="n">JaniceTrack</span><span class="o">*</span> <span class="n">track</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id40">
<h4>Thread Safety<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id41">
<h4>Parameters<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="10%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td>const <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a></td>
<td>The detection to get the track from.</td>
</tr>
<tr class="row-odd"><td>track</td>
<td><a class="reference internal" href="#janicetrack"><span class="std std-ref">JaniceTrack</span></a>*</td>
<td>The user is responsible for allocating memory for the struct before the function call. The implementor is responsbile for allocating and filling internal members. The user is responsible for free this object by calling <a class="reference internal" href="#janice-clear-track"><span class="std std-ref">janice_clear_track</span></a>.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-detection-get-attribute">
<span id="id42"></span><h3>janice_detection_get_attribute<a class="headerlink" href="#janice-detection-get-attribute" title="Permalink to this headline">¶</a></h3>
<p>Get an attribute from a detection. Attributes are additional metadata that an
implementation might have when creating a detection. Examples from face
detection include gender, ethnicity, and / or landmark locations. Implementors
are responsible for providing documentation on any attributes they support,
valid key values and possible return values.</p>
<div class="section" id="id43">
<h4>Signature<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_detection_get_attribute</span><span class="p">(</span><span class="n">const</span> <span class="n">JaniceDetection</span> <span class="n">detection</span><span class="p">,</span>
                                                         <span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">key</span><span class="p">,</span>
                                                         <span class="n">char</span><span class="o">**</span> <span class="n">value</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id44">
<h4>Thread Safety<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id45">
<h4>Parameters<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="10%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td>const <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a></td>
<td>The detection object to extract the attribute from.</td>
</tr>
<tr class="row-odd"><td>key</td>
<td>const char*</td>
<td>A null-terminated key to look up a specific attribute. Valid keys must be defined and documented by the implementor.</td>
</tr>
<tr class="row-even"><td>value</td>
<td>char**</td>
<td>An uninitialized char* to hold the value of the attribute. This object should be allocated by the implementor during the function call. This object must be null-terminated. The user is responsible for the object by calling <a class="reference internal" href="#janice-free-attribute"><span class="std std-ref">janice_free_attribute</span></a>.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-serialize-detection">
<span id="id46"></span><h3>janice_serialize_detection<a class="headerlink" href="#janice-serialize-detection" title="Permalink to this headline">¶</a></h3>
<p>Serialize a <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> object to a flat buffer.</p>
<div class="section" id="id47">
<h4>Signature<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_serialize_detection</span><span class="p">(</span><span class="n">const</span> <span class="n">JaniceDetection</span> <span class="n">detection</span><span class="p">,</span>
                                                     <span class="n">uint8_t</span><span class="o">**</span> <span class="n">data</span><span class="p">,</span>
                                                     <span class="n">size_t</span><span class="o">*</span> <span class="nb">len</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id48">
<h4>Thread Safety<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id49">
<h4>Parameters<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="13%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td>const <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a></td>
<td>A detection object to serialize</td>
</tr>
<tr class="row-odd"><td>data</td>
<td>uint8_t**</td>
<td>An uninitialized buffer to hold the flattened data. The implementor should allocate this object during the function call. The user is required to free the object with <a class="reference internal" href="#janice-free-buffer"><span class="std std-ref">janice_free_buffer</span></a>.</td>
</tr>
<tr class="row-even"><td>len</td>
<td>size_t*</td>
<td>The length of the flat buffer after it is filled. Memory for the object should be managed by the user. The implementation should assume this points to a valid object.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id50">
<h4>Example<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JaniceDetection</span> <span class="n">detection</span><span class="p">;</span> <span class="o">//</span> <span class="n">Where</span> <span class="n">detection</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">detection</span> <span class="n">created</span>
                           <span class="o">//</span> <span class="n">previously</span><span class="o">.</span>

<span class="n">uint8_t</span><span class="o">*</span> <span class="n">buffer</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
<span class="n">size_t</span> <span class="n">buffer_len</span><span class="p">;</span>
<span class="n">janice_serialize_detection</span><span class="p">(</span><span class="n">detection</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buffer</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buffer_len</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-deserialize-detection">
<span id="id51"></span><h3>janice_deserialize_detection<a class="headerlink" href="#janice-deserialize-detection" title="Permalink to this headline">¶</a></h3>
<p>Deserialize a <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> object from a flat buffer.</p>
<div class="section" id="id52">
<h4>Signature<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_deserialize_detection</span><span class="p">(</span><span class="n">const</span> <span class="n">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span>
                                                       <span class="n">size_t</span> <span class="nb">len</span><span class="p">,</span>
                                                       <span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">detection</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id53">
<h4>Thread Safety<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id54">
<h4>Parameters<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="12%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>const uint8_t*</td>
<td>A buffer containing data from a flattened detection object.</td>
</tr>
<tr class="row-odd"><td>len</td>
<td>size_t</td>
<td>The length of the flat buffer.</td>
</tr>
<tr class="row-even"><td>detection</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a>*</td>
<td>An uninitialized detection object. This object should be allocated by the implementor during the function call. Users are required to free the object with <a class="reference internal" href="#janice-free-detection"><span class="std std-ref">janice_free_detection</span></a>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id55">
<h4>Example<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">size_t</span> <span class="n">buffer_len</span> <span class="o">=</span> <span class="n">K</span><span class="p">;</span> <span class="o">//</span> <span class="n">Where</span> <span class="n">K</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">known</span> <span class="n">length</span> <span class="n">of</span> <span class="n">the</span> <span class="n">buffer</span>
<span class="n">uint8_t</span> <span class="n">buffer</span><span class="p">[</span><span class="n">buffer_len</span><span class="p">];</span>

<span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s2">&quot;serialized.detection&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">);</span>
<span class="n">fread</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>

<span class="n">JaniceDetection</span> <span class="n">detection</span> <span class="o">=</span> <span class="n">nullptr</span><span class="p">;</span>
<span class="n">janice_deserialize_detection</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">detection</span><span class="p">);</span>

<span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-read-detection">
<span id="id56"></span><h3>janice_read_detection<a class="headerlink" href="#janice-read-detection" title="Permalink to this headline">¶</a></h3>
<p>Read a detection from a file on disk. This method is functionally
equivalent to the following-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">size_t</span> <span class="n">buffer_len</span> <span class="o">=</span> <span class="n">K</span><span class="p">;</span> <span class="o">//</span> <span class="n">Where</span> <span class="n">K</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">known</span> <span class="n">length</span> <span class="n">of</span> <span class="n">the</span> <span class="n">buffer</span>
<span class="n">uint8_t</span> <span class="n">buffer</span><span class="p">[</span><span class="n">buffer_len</span><span class="p">];</span>

<span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s2">&quot;serialized.detection&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">);</span>
<span class="n">fread</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>

<span class="n">JaniceDetection</span> <span class="n">detection</span> <span class="o">=</span> <span class="n">nullptr</span><span class="p">;</span>
<span class="n">janice_deserialize_detection</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">detection</span><span class="p">);</span>

<span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</pre></div>
</div>
<p>It is provided for memory efficiency and ease of use when reading from
disk.</p>
<div class="section" id="id57">
<h4>Signature<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_read_detection</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
                                                <span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">detection</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id58">
<h4>Thread Safety<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id59">
<h4>Parameters<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="36%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>filename</td>
<td>const char*</td>
<td>The path to a file on disk</td>
</tr>
<tr class="row-odd"><td>detection</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a>*</td>
<td>An uninitialized detection object.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id60">
<h4>Example<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JaniceDetection detection = NULL;
if (janice_read_detection(&quot;example.detection&quot;, &amp;detection) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-write-detection">
<span id="id61"></span><h3>janice_write_detection<a class="headerlink" href="#janice-write-detection" title="Permalink to this headline">¶</a></h3>
<p>Write a detection to a file on disk. This method is functionally
equivalent to the following-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JaniceDetection</span> <span class="n">detection</span><span class="p">;</span> <span class="o">//</span> <span class="n">Where</span> <span class="n">detection</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">detection</span> <span class="n">created</span>
                           <span class="o">//</span> <span class="n">previously</span><span class="o">.</span>

<span class="n">uint8_t</span><span class="o">*</span> <span class="n">buffer</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
<span class="n">size_t</span> <span class="n">buffer_len</span><span class="p">;</span>
<span class="n">janice_serialize_detection</span><span class="p">(</span><span class="n">detection</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buffer</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buffer_len</span><span class="p">);</span>

<span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s2">&quot;serialized.detection&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">);</span>
<span class="n">fwrite</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>

<span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</pre></div>
</div>
<p>It is provided for memory efficiency and ease of use when writing to
disk.</p>
<div class="section" id="id62">
<h4>Signature<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_write_detection</span><span class="p">(</span><span class="n">const</span> <span class="n">JaniceDetection</span> <span class="n">detection</span><span class="p">,</span>
                                                 <span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="threadsafety">
<h4>ThreadSafety<a class="headerlink" href="#threadsafety" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id63">
<h4>Parameters<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="37%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td>const <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a></td>
<td>The detection object to write to disk.</td>
</tr>
<tr class="row-odd"><td>filename</td>
<td>const char*</td>
<td>The path to a file on disk</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id64">
<h4>Example<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JaniceDetection detection; // Where detection is a valid detection created
                           // previously
if (janice_write_detection(detection, &quot;example.detection&quot;) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-free-buffer">
<span id="id65"></span><h3>janice_free_buffer<a class="headerlink" href="#janice-free-buffer" title="Permalink to this headline">¶</a></h3>
<p>Release the memory for an allocated buffer.</p>
<div class="section" id="id66">
<h4>Signature<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_free_bufferuint8_t</span><span class="o">**</span> <span class="n">buffer</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id67">
<h4>Thread Safety<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a></p>
</div>
<div class="section" id="id68">
<h4>Parameters<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="32%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>buffer</td>
<td>uint8_t**</td>
<td>The buffer to free</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-free-detection">
<span id="id69"></span><h3>janice_free_detection<a class="headerlink" href="#janice-free-detection" title="Permalink to this headline">¶</a></h3>
<p>Free any memory associated with a <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> object.</p>
<div class="section" id="id70">
<h4>Signature<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_free_detection</span><span class="p">(</span><span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">detection</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id71">
<h4>Thread Safety<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id72">
<h4>Parameters<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="39%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a>*</td>
<td>A detection object to free.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id73">
<h4>Example<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JaniceDetection detection; // Where detection is a valid detection object
                           // created previously
if (janice_free_detection(&amp;detection) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-clear-detections">
<span id="id74"></span><h3>janice_clear_detections<a class="headerlink" href="#janice-clear-detections" title="Permalink to this headline">¶</a></h3>
<p>Free any memory associated with a <a class="reference internal" href="#janicedetections"><span class="std std-ref">JaniceDetections</span></a> object.</p>
<div class="section" id="id75">
<h4>Signature<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_clear_detections</span><span class="p">(</span><span class="n">JaniceDetections</span><span class="o">*</span> <span class="n">detections</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id76">
<h4>Thread Safety<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id77">
<h4>Parameters<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="40%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detections</td>
<td><a class="reference internal" href="#janicedetections"><span class="std std-ref">JaniceDetections</span></a> *</td>
<td>A detection object to clear.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-clear-detections-group">
<span id="id78"></span><h3>janice_clear_detections_group<a class="headerlink" href="#janice-clear-detections-group" title="Permalink to this headline">¶</a></h3>
<p>Free any memory associated with a <a class="reference internal" href="#janicedetectionsgroup"><span class="std std-ref">JaniceDetectionsGroup</span></a> object.</p>
<div class="section" id="id79">
<h4>Signature<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_clear_detections_group</span><span class="p">(</span><span class="n">JaniceDetectionsGroup</span>\<span class="o">*</span> <span class="n">group</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-clear-track">
<span id="id80"></span><h3>janice_clear_track<a class="headerlink" href="#janice-clear-track" title="Permalink to this headline">¶</a></h3>
<p>Free any memory associated with a <a class="reference internal" href="#janicetrack"><span class="std std-ref">JaniceTrack</span></a> object.</p>
<div class="section" id="id81">
<h4>Signature<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_clear_track</span><span class="p">(</span><span class="n">JaniceTrack</span><span class="o">*</span> <span class="n">track</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id82">
<h4>Thread Safety<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id83">
<h4>Parameters<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="39%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>track</td>
<td><a class="reference internal" href="#janicetrack"><span class="std std-ref">JaniceTrack</span></a>*</td>
<td>The track object to clear.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-free-attribute">
<span id="id84"></span><h3>janice_free_attribute<a class="headerlink" href="#janice-free-attribute" title="Permalink to this headline">¶</a></h3>
<p>Free any memory associated with an attribute value.</p>
<div class="section" id="id85">
<h4>Signature<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_free_attribute</span><span class="p">(</span><span class="n">char</span><span class="o">**</span> <span class="n">value</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id86">
<h4>Thread Safety<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h4>
<p>This function is <a class="reference internal" href="concepts.html#reentrant"><span class="std std-ref">Reentrant</span></a>.</p>
</div>
<div class="section" id="id87">
<h4>Parameters<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="22%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>attribute</td>
<td>char**</td>
<td>The attribute to free.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">JanICE</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="initialization.html">Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="train.html">Training</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Detection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structs">Structs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#callbacks">Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enrollment.html">Enrollment</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison.html">Comparison / Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="train.html" title="previous chapter">Training</a></li>
      <li>Next: <a href="enrollment.html" title="next chapter">Enrollment</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Noblis.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/api/detection.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>