
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Detection &#8212; JanICE 4.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Enrollment" href="enrollment.html" />
    <link rel="prev" title="Training" href="train.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="detection">
<span id="id1"></span><h1>Detection<a class="headerlink" href="#detection" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>In the context of this API, detection is used to refer to the identification of
objects of interest within a <a class="reference internal" href="io.html#io"><span class="std std-ref">I/O</span></a> object. Detections are represented using
the <a class="reference internal" href="#janicedetectiontype"><span class="std std-ref">JaniceDetectionType</span></a> object which implementors are free to define
however they would like. For images, a detection is defined as a rectangle that
bounds an object of interest and an associated confidence value. For video, a
single object can exist in multiple frames. A rectangle and confidence are only
relevant in a single frame. In this case, we define a detection as a list of
(rectangle, confidence) pairs that track a single object through a video. It is
not required that this list be dense however (i.e. frames can be skipped). To
support this, we extend our representation of a detection to a (rectangle,
confidence, frame) tuple where frame gives the index of the frame the rectangle
was found in.</p>
</div>
<div class="section" id="structs">
<h2>Structs<a class="headerlink" href="#structs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="janicerect">
<span id="id2"></span><h3>JaniceRect<a class="headerlink" href="#janicerect" title="Permalink to this headline">¶</a></h3>
<p>A simple struct that represents a rectangle</p>
<div class="section" id="fields">
<h4>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="20%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>x</td>
<td>uint32_t</td>
<td>The x offset of the rectangle in pixels</td>
</tr>
<tr class="row-odd"><td>y</td>
<td>uint32_t</td>
<td>The y offset of the rectangle in pixels</td>
</tr>
<tr class="row-even"><td>width</td>
<td>uint32_t</td>
<td>The width of the rectangle in pixels</td>
</tr>
<tr class="row-odd"><td>height</td>
<td>uint32_t</td>
<td>The height of the rectangle in pixels</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janicedetectioniteratortype">
<span id="id3"></span><h3>JaniceDetectionIteratorType<a class="headerlink" href="#janicedetectioniteratortype" title="Permalink to this headline">¶</a></h3>
<p>An opaque pointer to an iterator class through a detection. If the
detection was computed from an image, the iterator should only move over
a single value. If the detection was computed from a video, the iterator
should move over an array of elements, the length of which is less than
or equal to the number of frames in the video, and might be sparse (i.e.
frames can be skipped).</p>
</div>
<div class="section" id="janicedetectiontype">
<span id="id4"></span><h3>JaniceDetectionType<a class="headerlink" href="#janicedetectiontype" title="Permalink to this headline">¶</a></h3>
<p>An opaque pointer to a struct that represents a detection. See <a class="reference internal" href="#detection"><span class="std std-ref">Detection</span></a>
for more information.</p>
</div>
</div>
<div class="section" id="typedefs">
<h2>Typedefs<a class="headerlink" href="#typedefs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="janicedetectioniterator">
<span id="id5"></span><h3>JaniceDetectionIterator<a class="headerlink" href="#janicedetectioniterator" title="Permalink to this headline">¶</a></h3>
<p>A pointer to a <a class="reference internal" href="#janicedetectioniteratortype"><span class="std std-ref">JaniceDetectionIteratorType</span></a> object.</p>
<div class="section" id="signature">
<h4>Signature<a class="headerlink" href="#signature" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="n">JaniceDetectionIteratorType</span><span class="o">*</span> <span class="n">JaniceDetectionIterator</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janicedetection">
<span id="id6"></span><h3>JaniceDetection<a class="headerlink" href="#janicedetection" title="Permalink to this headline">¶</a></h3>
<p>A pointer to a <a class="reference internal" href="#janicedetectiontype"><span class="std std-ref">JaniceDetectionType</span></a> object.</p>
<div class="section" id="id7">
<h4>Signature<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="n">JaniceDetectionType</span><span class="o">*</span> <span class="n">JaniceDetection</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janiceconstdetection">
<span id="id8"></span><h3>JaniceConstDetection<a class="headerlink" href="#janiceconstdetection" title="Permalink to this headline">¶</a></h3>
<p>A pointer to a constant <a class="reference internal" href="#janicedetectiontype"><span class="std std-ref">JaniceDetectionType</span></a> object.</p>
<div class="section" id="id9">
<h4>Signature<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">const</span> <span class="n">struct</span> <span class="n">JaniceDetectionType</span><span class="o">*</span> <span class="n">JaniceConstDetection</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janicedetections">
<span id="id10"></span><h3>JaniceDetections<a class="headerlink" href="#janicedetections" title="Permalink to this headline">¶</a></h3>
<p>An array of <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> objects.</p>
<div class="section" id="id11">
<h4>Signature<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">JaniceDetections</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janiceconstdetections">
<span id="id12"></span><h3>JaniceConstDetections<a class="headerlink" href="#janiceconstdetections" title="Permalink to this headline">¶</a></h3>
<p>An array of <a class="reference internal" href="#janiceconstdetection"><span class="std std-ref">JaniceConstDetection</span></a> objects.</p>
<div class="section" id="id13">
<h4>Signature<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="n">JaniceConstDetection</span><span class="o">*</span> <span class="n">JaniceConstDetections</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="janice-detection-it-next">
<span id="id14"></span><h3>janice_detection_it_next<a class="headerlink" href="#janice-detection-it-next" title="Permalink to this headline">¶</a></h3>
<p>Get the next element in a detection track.</p>
<div class="section" id="id15">
<h4>Signature<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_detection_it_next</span><span class="p">(</span><span class="n">JaniceDetectionIterator</span> <span class="n">it</span><span class="p">,</span>
                                                   <span class="n">JaniceRect</span><span class="o">*</span> <span class="n">rect</span><span class="p">,</span>
                                                   <span class="n">uint32_t</span><span class="o">*</span> <span class="n">frame</span><span class="p">,</span>
                                                   <span class="nb">float</span><span class="o">*</span> <span class="n">confidence</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="thread-safety">
<h4>Thread Safety<a class="headerlink" href="#thread-safety" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="confidence">
<span id="detection-confidence"></span><h4>Confidence<a class="headerlink" href="#confidence" title="Permalink to this headline">¶</a></h4>
<p>The confidence value indicates a likelihood that the rectangle actually
bounds an object of interest. It is <strong>NOT</strong> required to be a probability
and often only has meaning relative to other confidence values from the
same algorithm. The only restriction is that a larger confidence value
indicates a greater likelihood that the rectangle bounds an object.</p>
</div>
<div class="section" id="parameters">
<h4>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="43%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>it</td>
<td><a class="reference internal" href="#janicedetectioniterator"><span class="std std-ref">JaniceDetectionIterator</span></a></td>
<td>A detection iterator
object.</td>
</tr>
<tr class="row-odd"><td>rect</td>
<td><a class="reference internal" href="#janicerect"><span class="std std-ref">JaniceRect</span></a> *</td>
<td>The location of a object of
interest.</td>
</tr>
<tr class="row-even"><td>frame</td>
<td>uint32_t *</td>
<td>The frame index for an
object of interest.</td>
</tr>
<tr class="row-odd"><td>confidence</td>
<td>float *</td>
<td>The
<a class="reference internal" href="#detection-confidence"><span class="std std-ref">Confidence</span></a>
of the location.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-detection-it-reset">
<span id="id16"></span><h3>janice_detection_it_reset<a class="headerlink" href="#janice-detection-it-reset" title="Permalink to this headline">¶</a></h3>
<p>Reset an iterator back to its initial state.</p>
<div class="section" id="id17">
<h4>Signature<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_detection_it_reset</span><span class="p">(</span><span class="n">JaniceDetectionIterator</span> <span class="n">it</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id18">
<h4>Thread Safety<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id19">
<h4>Parameters<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="44%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>it</td>
<td><a class="reference internal" href="#janicedetectioniterator"><span class="std std-ref">JaniceDetectionIterator</span></a></td>
<td>The iterator object to reset.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-free-detection-it">
<span id="id20"></span><h3>janice_free_detection_it<a class="headerlink" href="#janice-free-detection-it" title="Permalink to this headline">¶</a></h3>
<p>Free any memory associated with a detection iterator object.</p>
<div class="section" id="id21">
<h4>Signature<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_free_detection_it</span><span class="p">(</span><span class="n">JaniceDetectionIterator</span><span class="o">*</span> <span class="n">it</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id22">
<h4>Thread Safety<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id23">
<h4>Parameters<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="48%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>it</td>
<td><a class="reference internal" href="#janicedetectioniterator"><span class="std std-ref">JaniceDetectionIterator</span></a> *</td>
<td>The iterator object to free.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-create-detection">
<span id="id24"></span><h3>janice_create_detection<a class="headerlink" href="#janice-create-detection" title="Permalink to this headline">¶</a></h3>
<p>Create a detection from a known rectangle. This is useful if a human has
identified an object of interest and would like to run subsequent API
functions on it. In the case where the input media is a video the given
rectangle is considered an initial sighting of the object of interest.
The implementation may detect additional sightings of the object in
successive frames.</p>
<div class="section" id="id25">
<h4>Signature<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_create_detection</span><span class="p">(</span><span class="n">JaniceMediaIterator</span> <span class="n">media</span><span class="p">,</span>
                                                  <span class="n">const</span> <span class="n">JaniceRect</span> <span class="n">rect</span><span class="p">,</span>
                                                  <span class="n">uint32_t</span> <span class="n">frame</span><span class="p">,</span>
                                                  <span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">detection</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id26">
<h4>Thread Safety<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id27">
<h4>Parameters<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="37%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>media</td>
<td><a class="reference internal" href="io.html#janicemediaiterator"><span class="std std-ref">JaniceMediaIterator</span></a></td>
<td>A media object to create the
detection from.</td>
</tr>
<tr class="row-odd"><td>rect</td>
<td>const <a class="reference internal" href="#janicerect"><span class="std std-ref">JaniceRect</span></a></td>
<td>A rectangle that bounds the object
of interest.</td>
</tr>
<tr class="row-even"><td>frame</td>
<td>uint32_t</td>
<td>An index to the frame in the media
where the object of interest appears
If the media is an image this should
be 0.</td>
</tr>
<tr class="row-odd"><td>detection</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a>*</td>
<td>An uninitialized pointer to a
detection object. The object should
allocated by the implementor during
function execution. The user is
responsible for freeing the object
using <a class="reference internal" href="#janice-free-detection"><span class="std std-ref">janice_free_detection</span></a>
.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span>JaniceMedia media; // Where media is a valid media object created previously

JaniceRect rect; // Create a bounding rectangle around an object of interest
rect.x      = 10; // The rectangle should fall within the bounds of the media
rect.y      = 10; // This code assumes media width &gt; 110 and media height &gt; 110
rect.width  = 100;
rect.height = 100;

JaniceDetection detection = NULL; // best practice to initialize to NULL
if (janice_create_detection(media, rect, 0 /* frame */, &amp;detection) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-detect">
<span id="id28"></span><h3>janice_detect<a class="headerlink" href="#janice-detect" title="Permalink to this headline">¶</a></h3>
<p>Automatically detect objects in a media object. See <a class="reference internal" href="#detection"><span class="std std-ref">Detection</span></a> for an
overview of detection in the context of this API.</p>
<div class="section" id="id29">
<h4>Signature<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_detect</span><span class="p">(</span><span class="n">JaniceMediaIterator</span> <span class="n">media</span><span class="p">,</span>
                                        <span class="n">uint32_t</span> <span class="n">min_object_size</span><span class="p">,</span>
                                        <span class="n">JaniceDetections</span><span class="o">*</span> <span class="n">detections</span><span class="p">,</span>
                                        <span class="n">uint32_t</span><span class="o">*</span> <span class="n">num_detections</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id30">
<h4>Thread Safety<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="minimum-object-size">
<span id="detection-min-object-size"></span><h4>Minimum Object Size<a class="headerlink" href="#minimum-object-size" title="Permalink to this headline">¶</a></h4>
<p>This function specifies a minimum object size as one of its parameters.
This value indicates the minimum size of objects that the user would
like to see detected. Often, increasing the minimum size can improve
runtime of algorithms. The size is in pixels and corresponds to the
length of the smaller side of the rectangle. This means a detection will
be returned if and only if its smaller side is larger than the value
specified. If the user does not wish to specify a minimum width 0 can be
provided.</p>
</div>
<div class="section" id="tracking">
<h4>Tracking<a class="headerlink" href="#tracking" title="Permalink to this headline">¶</a></h4>
<p>When the input media is a video many implementations will implement a
form of object tracking to correlate multiple sightings of the same
object into a single structure. There are a number of approaches and
algorithms to implement object tracking. This API makes NO attempt to
define or otherwise constrain how implementations handle tracking. Users
should be warned that an implementation might output multiple tracks for
a single object and that a single track might contain multiple objects
in it by mistake. In some cases, which should be clearly documented in
implementation documentation, it might be beneficial to perform a
post-processing clustering step on the results tracks, which could help
correlate multiple tracks of the same object.</p>
</div>
<div class="section" id="id31">
<h4>Parameters<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="35%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>media</td>
<td><a class="reference internal" href="io.html#janicemediaiterator"><span class="std std-ref">JaniceMediaIterator</span></a></td>
<td>A media object to run detection
on.</td>
</tr>
<tr class="row-odd"><td>min_object_
size</td>
<td>uint32_t</td>
<td>A minimum object size. See
<a class="reference internal" href="#detection-min-object-size"><span class="std std-ref">Minimum Object Size</span></a></td>
</tr>
<tr class="row-even"><td>detections</td>
<td><a class="reference internal" href="#janicedetections"><span class="std std-ref">JaniceDetections</span></a> *</td>
<td>An uninitialized array to hold
all of the detections detected
in the media object. This
object should be allocated by
the implementor during the
call. The user is required to
free the object by calling
<a class="reference internal" href="#janice-free-detections"><span class="std std-ref">janice_free_detections</span></a>.</td>
</tr>
<tr class="row-odd"><td>num_
detections</td>
<td>uint32_t*</td>
<td>The number of detections
returned in the <em>detections</em>
array.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id32">
<h4>Example<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span>JaniceMedia media; // Where media is a valid media object created previously
const uint32_t min_object_size = 24; // Only find objects where the smaller
                                     // side is &gt; 24 pixels
JaniceDetection* detections = NULL; // best practice to initialize to NULL
uint32_t num_detections; // Will be populated with the size of detections

if (janice_detect(media, min_object_size, &amp;detections, &amp;num_detections) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-create-detection-it">
<span id="id33"></span><h3>janice_create_detection_it<a class="headerlink" href="#janice-create-detection-it" title="Permalink to this headline">¶</a></h3>
<p>Create an iterator to iterate over detection elements.</p>
<div class="section" id="id34">
<h4>Signature<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_create_detection_it</span><span class="p">(</span><span class="n">JaniceConstDetection</span> <span class="n">detection</span><span class="p">,</span>
                                                     <span class="n">JaniceDetectionIterator</span><span class="o">*</span> <span class="n">it</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id35">
<h4>Thread Safety<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id36">
<h4>Parameters<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="43%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td><a class="reference internal" href="#janiceconstdetection"><span class="std std-ref">JaniceConstDetection</span></a></td>
<td>The detection object to
create an iterator from.</td>
</tr>
<tr class="row-odd"><td>it</td>
<td><a class="reference internal" href="#janicedetectioniterator"><span class="std std-ref">JaniceDetectionIterator</span></a> *</td>
<td>An uninitialized detection
iterator object. The
implementor should allocate
this object during the
function call. Users are
required to free the object
with
<a class="reference internal" href="#janice-free-detection-it"><span class="std std-ref">janice_free_detection_it</span></a>
.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="janice-serialize-detection">
<span id="id37"></span><h3>janice_serialize_detection<a class="headerlink" href="#janice-serialize-detection" title="Permalink to this headline">¶</a></h3>
<p>Serialize a <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> object to a flat buffer.</p>
<div class="section" id="id38">
<h4>Signature<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_serialize_detection</span><span class="p">(</span><span class="n">JaniceConstDetection</span> <span class="n">detection</span><span class="p">,</span>
                                                     <span class="n">JaniceBuffer</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span>
                                                     <span class="n">size_t</span><span class="o">*</span> <span class="nb">len</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id39">
<h4>Thread Safety<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id40">
<h4>Parameters<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="38%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td><a class="reference internal" href="#janiceconstdetection"><span class="std std-ref">JaniceConstDetection</span></a></td>
<td>A detection object to serialize</td>
</tr>
<tr class="row-odd"><td>data</td>
<td><a class="reference internal" href="io.html#janicebuffer"><span class="std std-ref">JaniceBuffer</span></a> *</td>
<td>An uninitialized buffer to hold
the flattened data. The
implementor should allocate this
object during the function call.
The user is required to free the
object with
<a class="reference internal" href="io.html#janice-free-buffer"><span class="std std-ref">janice_free_buffer</span></a>.</td>
</tr>
<tr class="row-even"><td>len</td>
<td>size_t*</td>
<td>The length of the flat buffer
after it is filled.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id41">
<h4>Example<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JaniceDetection</span> <span class="n">detection</span><span class="p">;</span> <span class="o">//</span> <span class="n">Where</span> <span class="n">detection</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">detection</span> <span class="n">created</span>
                           <span class="o">//</span> <span class="n">previously</span><span class="o">.</span>

<span class="n">JaniceBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
<span class="n">size_t</span> <span class="n">buffer_len</span><span class="p">;</span>
<span class="n">janice_serialize_detection</span><span class="p">(</span><span class="n">detection</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buffer</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buffer_len</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-deserialize-detection">
<span id="id42"></span><h3>janice_deserialize_detection<a class="headerlink" href="#janice-deserialize-detection" title="Permalink to this headline">¶</a></h3>
<p>Deserialize a <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> object from a flat buffer.</p>
<div class="section" id="id43">
<h4>Signature<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_deserialize_detection</span><span class="p">(</span><span class="n">const</span> <span class="n">JaniceBuffer</span> <span class="n">data</span><span class="p">,</span>
                                                       <span class="n">size_t</span> <span class="nb">len</span><span class="p">,</span>
                                                       <span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">detection</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id44">
<h4>Thread Safety<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id45">
<h4>Parameters<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="36%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>const <a class="reference internal" href="io.html#janicebuffer"><span class="std std-ref">JaniceBuffer</span></a></td>
<td>A buffer containing data from a
flattened detection object.</td>
</tr>
<tr class="row-odd"><td>len</td>
<td>size_t</td>
<td>The length of the flat buffer.</td>
</tr>
<tr class="row-even"><td>detection</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> *</td>
<td>An uninitialized detection object.
This object should be allocated by
the implementor during the function
call. Users are required to free the
object with
<a class="reference internal" href="#janice-free-detection"><span class="std std-ref">janice_free_detection</span></a>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id46">
<h4>Example<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">size_t</span> <span class="n">buffer_len</span> <span class="o">=</span> <span class="n">K</span><span class="p">;</span> <span class="o">//</span> <span class="n">Where</span> <span class="n">K</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">known</span> <span class="n">length</span> <span class="n">of</span> <span class="n">the</span> <span class="n">buffer</span>
<span class="n">JaniceBuffer</span> <span class="n">buffer</span><span class="p">[</span><span class="n">buffer_len</span><span class="p">];</span>

<span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s2">&quot;serialized.detection&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">);</span>
<span class="n">fread</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>

<span class="n">JaniceDetection</span> <span class="n">detection</span> <span class="o">=</span> <span class="n">nullptr</span><span class="p">;</span>
<span class="n">janice_deserialize_detection</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">detection</span><span class="p">);</span>

<span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-read-detection">
<span id="id47"></span><h3>janice_read_detection<a class="headerlink" href="#janice-read-detection" title="Permalink to this headline">¶</a></h3>
<p>Read a detection from a file on disk. This method is functionally
equivalent to the following-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">size_t</span> <span class="n">buffer_len</span> <span class="o">=</span> <span class="n">K</span><span class="p">;</span> <span class="o">//</span> <span class="n">Where</span> <span class="n">K</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">known</span> <span class="n">length</span> <span class="n">of</span> <span class="n">the</span> <span class="n">buffer</span>
<span class="n">JaniceBuffer</span> <span class="n">buffer</span><span class="p">[</span><span class="n">buffer_len</span><span class="p">];</span>

<span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s2">&quot;serialized.detection&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">);</span>
<span class="n">fread</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>

<span class="n">JaniceDetection</span> <span class="n">detection</span> <span class="o">=</span> <span class="n">nullptr</span><span class="p">;</span>
<span class="n">janice_deserialize_detection</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">detection</span><span class="p">);</span>

<span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</pre></div>
</div>
<p>It is provided for memory efficiency and ease of use when reading from
disk.</p>
<div class="section" id="id48">
<h4>Signature<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_read_detection</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
                                                <span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">detection</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id49">
<h4>Thread Safety<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id50">
<h4>Parameters<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="35%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>filename</td>
<td>const char*</td>
<td>The path to a file on disk</td>
</tr>
<tr class="row-odd"><td>detection</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> *</td>
<td>An uninitialized detection object.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id51">
<h4>Example<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span>JaniceDetection detection = NULL;
if (janice_read_detection(&quot;example.detection&quot;, &amp;detection) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-write-detection">
<span id="id52"></span><h3>janice_write_detection<a class="headerlink" href="#janice-write-detection" title="Permalink to this headline">¶</a></h3>
<p>Write a detection to a file on disk. This method is functionally
equivalent to the following-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JaniceDetection</span> <span class="n">detection</span><span class="p">;</span> <span class="o">//</span> <span class="n">Where</span> <span class="n">detection</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">detection</span> <span class="n">created</span>
                           <span class="o">//</span> <span class="n">previously</span><span class="o">.</span>

<span class="n">JaniceBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
<span class="n">size_t</span> <span class="n">buffer_len</span><span class="p">;</span>
<span class="n">janice_serialize_detection</span><span class="p">(</span><span class="n">detection</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buffer</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buffer_len</span><span class="p">);</span>

<span class="n">FILE</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s2">&quot;serialized.detection&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">);</span>
<span class="n">fwrite</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>

<span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</pre></div>
</div>
<p>It is provided for memory efficiency and ease of use when writing to
disk.</p>
<div class="section" id="id53">
<h4>Signature<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_write_detection</span><span class="p">(</span><span class="n">JaniceConstDetection</span> <span class="n">detection</span><span class="p">,</span>
                                                 <span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="threadsafety">
<h4>ThreadSafety<a class="headerlink" href="#threadsafety" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id54">
<h4>Parameters<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="38%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td><a class="reference internal" href="#janiceconstdetection"><span class="std std-ref">JaniceConstDetection</span></a></td>
<td>The detection object to write to
disk.</td>
</tr>
<tr class="row-odd"><td>filename</td>
<td>const char*</td>
<td>The path to a file on disk</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id55">
<h4>Example<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span>JaniceDetection detection; // Where detection is a valid detection created
                           // previously
if (janice_write_detection(detection, &quot;example.detection&quot;) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-free-detection">
<span id="id56"></span><h3>janice_free_detection<a class="headerlink" href="#janice-free-detection" title="Permalink to this headline">¶</a></h3>
<p>Free any memory associated with a <a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> object.</p>
<div class="section" id="id57">
<h4>Signature<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_free_detection</span><span class="p">(</span><span class="n">JaniceDetection</span><span class="o">*</span> <span class="n">detection</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id58">
<h4>Thread Safety<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id59">
<h4>Parameters<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="36%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detection</td>
<td><a class="reference internal" href="#janicedetection"><span class="std std-ref">JaniceDetection</span></a> *</td>
<td>A detection object to free. Best
practice dictates the pointer
should be set to <em>NULL</em> after it is
freed.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id60">
<h4>Example<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span>JaniceDetection detection; // Where detection is a valid detection object
                           // created previously
if (janice_free_detection(&amp;detection) != JANICE_SUCCESS)
    // ERROR!
</pre></div>
</div>
</div>
</div>
<div class="section" id="janice-free-detections">
<span id="id61"></span><h3>janice_free_detections<a class="headerlink" href="#janice-free-detections" title="Permalink to this headline">¶</a></h3>
<p>Free any memory associated with a:ref:<cite>JaniceDetections</cite> object.</p>
<div class="section" id="id62">
<h4>Signature<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">JANICE_EXPORT</span> <span class="n">JaniceError</span> <span class="n">janice_free_detections</span><span class="p">(</span><span class="n">JaniceDetections</span><span class="o">*</span> <span class="n">detection</span><span class="p">,</span>
                                                 <span class="n">uint32_t</span> <span class="n">num_detections</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id63">
<h4>Thread Safety<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h4>
<p>This function is reentrant.</p>
</div>
<div class="section" id="id64">
<h4>Parameters<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="37%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>detections</td>
<td><a class="reference internal" href="#janicedetections"><span class="std std-ref">JaniceDetections</span></a> *</td>
<td>An array of detections to free.
Best practice dictates the pointer
should be set to <em>NULL</em> after it
is freed.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">JanICE</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="initialization.html">Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="train.html">Training</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Detection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structs">Structs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#typedefs">Typedefs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enrollment.html">Enrollment</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison.html">Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="train.html" title="previous chapter">Training</a></li>
      <li>Next: <a href="enrollment.html" title="next chapter">Enrollment</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Noblis.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/api/detection.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>